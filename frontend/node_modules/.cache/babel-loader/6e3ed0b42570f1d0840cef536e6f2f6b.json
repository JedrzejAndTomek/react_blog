{"ast":null,"code":"import _defineProperty from\"C:\\\\Programowanie\\\\react_blog\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:\\\\Programowanie\\\\react_blog\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Programowanie\\\\react_blog\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Programowanie\\\\react_blog\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Programowanie\\\\react_blog\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Programowanie\\\\react_blog\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';import{Col,Form,FormGroup,Label,Input,Button}from'reactstrap';import axios from'axios';var PostForm=/*#__PURE__*/function(_React$Component){_inherits(PostForm,_React$Component);function PostForm(props){var _this;_classCallCheck(this,PostForm);_this=_possibleConstructorReturn(this,_getPrototypeOf(PostForm).call(this,props));_this.onChange=function(e){var name=e.target.name;var value=e.target.value;var errTitle='';var errContent='';var errEm='';// walidacja tytułu    \nif(name===\"title\"){if(value.length<=2||value.length>=20){errTitle=React.createElement(\"strong\",null,\"Your title must be more than 2 and less then 20 characters \");}_this.setState({errTitle:errTitle});}// walidacja treści  \nif(name===\"content\"){if(value.length<=100||value.length>=800){errContent=React.createElement(\"strong\",null,\"Your content must be more than 100 and less then 800 characters\");}_this.setState({errContent:errContent});}// walidacja e-maila  \nif(name===\"email\"){if(!/^[a-z\\d]+[\\w\\d.-]*@(?:[a-z\\d]+[a-z\\d-]+\\.){1,5}[a-z]{2,6}$/i.test(value)){errEm=React.createElement(\"strong\",null,\"Please enter valid e-mail\");}_this.setState({errEm:errEm});}_this.setState(_defineProperty({},name,value));};_this.selectedImage=function(e){_this.setState({postImage:e.target.files[0]});};_this.onSubmit=function(e){//e.preventDefault()\nvar post={title:_this.state.title,content:_this.state.content,email:_this.state.email};var fd=new FormData();fd.append('postImage',_this.state.postImage,_this.state.postImage.name);axios.post('/posts',post,fd).then(function(res){return console.log(res.data);});_this.setState({title:\"\",content:\"\",email:\"\",postImage:null});console.log(post);console.log(fd);_this.props.history.push('/');};_this.state={title:\"\",content:\"\",email:\"\",postImage:null,errTitle:\"\",errContent:\"\",errEm:\"\"};return _this;}_createClass(PostForm,[{key:\"render\",value:function render(){return React.createElement(\"div\",null,React.createElement(Form,{method:\"post\",id:\"PostForm\",action:\"admin/posts/create-post\",enctype:\"multipart/form-data\",onSubmit:this.onSubmit,className:\"form\"},React.createElement(FormGroup,{className:\"mx-auto\"},React.createElement(Label,{for:\"title\"},\"Title\"),React.createElement(Input,{type:\"text\",id:\"title\",name:\"title\",placeholder:\"Title:\",onChange:this.onChange}),React.createElement(\"h6\",null,this.state.errTitle)),React.createElement(FormGroup,{className:\"mx-auto\"},React.createElement(Label,{for:\"Content\"},\"Content\"),React.createElement(Input,{type:\"textarea\",id:\"content\",name:\"content\",placeholder:\"Content:\",onChange:this.onChange}),React.createElement(\"h6\",null,this.state.errContent)),React.createElement(FormGroup,{className:\"mx-auto\"},React.createElement(Label,{for:\"Email\"},\"Email\"),React.createElement(Input,{type:\"textarea\",id:\"email\",name:\"email\",placeholder:\"Email:\",onChange:this.onChange}),React.createElement(\"h6\",null,this.state.errEm)),React.createElement(\"div\",null,React.createElement(\"input\",{type:\"file\",onChange:this.selectedImage})),React.createElement(Col,{className:\"text-center\"},React.createElement(Button,{type:\"submit\"},\"Submit\"))));}}]);return PostForm;}(React.Component);export default PostForm;","map":{"version":3,"sources":["C:/Programowanie/react_blog/frontend/src/components/CreatePost.js"],"names":["React","Col","Form","FormGroup","Label","Input","Button","axios","PostForm","props","onChange","e","name","target","value","errTitle","errContent","errEm","length","setState","test","selectedImage","postImage","files","onSubmit","post","title","state","content","email","fd","FormData","append","then","res","console","log","data","history","push","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {\r\n    Col,\r\n    Form,\r\n    FormGroup,\r\n    Label,\r\n    Input,\r\n    Button\r\n} from 'reactstrap';\r\nimport axios from 'axios';\r\n\r\nclass PostForm extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            title: \"\",\r\n            content: \"\",\r\n            email: \"\",\r\n            postImage: null,\r\n            errTitle: \"\",\r\n            errContent: \"\",\r\n            errEm: \"\"\r\n        }\r\n    }\r\n\r\n    onChange = (e) => {\r\n\r\n        let name = e.target.name;\r\n        let value = e.target.value;\r\n        let errTitle = '';\r\n        let errContent = '';\r\n        let errEm = '';\r\n\r\n\r\n        // walidacja tytułu    \r\n        if (name === \"title\"){\r\n            if (value.length <= 2 || value.length >=20){\r\n                errTitle = <strong>Your title must be more than 2 and less then 20 characters </strong>;\r\n            }  \r\n            this.setState({errTitle: errTitle});\r\n        }\r\n\r\n        // walidacja treści  \r\n        if (name === \"content\"){\r\n            if (value.length <= 100 || value.length >=800 ){\r\n                errContent = <strong>Your content must be more than 100 and less then 800 characters</strong>;\r\n            }  \r\n            this.setState({errContent: errContent});\r\n        }\r\n\r\n         // walidacja e-maila  \r\n        if (name === \"email\") {\r\n            if (!/^[a-z\\d]+[\\w\\d.-]*@(?:[a-z\\d]+[a-z\\d-]+\\.){1,5}[a-z]{2,6}$/i.test(value)) {\r\n                errEm = <strong>Please enter valid e-mail</strong>;\r\n\r\n            }\r\n            this.setState({errEm: errEm});\r\n        }\r\n\r\n            this.setState({[name]: value});\r\n    }\r\n\r\n    // wybranie zdjecia\r\n    selectedImage = e => {\r\n        this.setState({\r\n            postImage: e.target.files[0]\r\n        })\r\n    }\r\n\r\n   \r\n\r\n    onSubmit = (e) => {\r\n        //e.preventDefault()\r\n\r\n        const post = {\r\n            title: this.state.title,\r\n            content: this.state.content,\r\n            email: this.state.email\r\n        }\r\n\r\n        \r\n        \r\n        const fd = new FormData();\r\n        fd.append('postImage', this.state.postImage, this.state.postImage.name);\r\n        axios.post('/posts', post, fd)\r\n        .then(res => console.log(res.data))\r\n\r\n        this.setState({\r\n            title: \"\",\r\n            content: \"\",\r\n            email: \"\",\r\n            postImage: null\r\n        })\r\n\r\n         \r\n       console.log(post);\r\n       console.log(fd);\r\n\r\n        this.props.history.push('/')\r\n    }\r\n\r\n    render() {\r\n        return(\r\n            <div>\r\n                <Form method=\"post\" id=\"PostForm\" action=\"admin/posts/create-post\" enctype=\"multipart/form-data\" onSubmit={this.onSubmit} className=\"form\">\r\n                    <FormGroup className=\"mx-auto\">\r\n                        <Label for=\"title\">Title</Label>\r\n                        <Input type=\"text\" id=\"title\" name=\"title\" placeholder=\"Title:\" onChange={this.onChange} />\r\n                        <h6>{this.state.errTitle}</h6>\r\n                    </FormGroup>\r\n                    \r\n                    <FormGroup className=\"mx-auto\">\r\n                        <Label for=\"Content\">Content</Label>\r\n                        <Input type=\"textarea\" id=\"content\" name=\"content\" placeholder=\"Content:\" onChange={this.onChange} />\r\n                        <h6>{this.state.errContent}</h6>\r\n                    </FormGroup>\r\n                    \r\n                    <FormGroup className=\"mx-auto\">\r\n                        <Label for=\"Email\">Email</Label>\r\n                        <Input type=\"textarea\" id=\"email\" name=\"email\" placeholder=\"Email:\" onChange={this.onChange} />\r\n                        <h6>{this.state.errEm}</h6>\r\n                    </FormGroup>\r\n                    \r\n                        <div>\r\n                        <input type=\"file\" onChange={this.selectedImage}/>\r\n                        </div>\r\n\r\n                    <Col className=\"text-center\"><Button type=\"submit\">Submit</Button></Col>\r\n                </Form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default PostForm;\r\n"]},"metadata":{},"sourceType":"module"}